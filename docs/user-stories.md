main: refactor smart contract logic 2020-09-30 00:00:12 +0200