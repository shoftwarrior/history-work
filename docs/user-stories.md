main: refactor smart contract logic 2020-03-19 00:00:10 +0200