main: refactor smart contract logic 2020-10-11 00:00:16 +0200