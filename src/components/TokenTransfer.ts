main: refactor smart contract logic 2020-08-07 00:00:03 +0200