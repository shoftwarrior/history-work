main: refactor smart contract logic 2020-10-02 00:00:04 +0200