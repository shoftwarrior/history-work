main: refactor smart contract logic 2023-11-08 15:12:12 +0200