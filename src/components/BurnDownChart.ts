main: refactor smart contract logic 2020-12-28 00:00:03 +0200