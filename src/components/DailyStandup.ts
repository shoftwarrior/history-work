main: refactor smart contract logic 2020-05-19 00:00:10 +0200