main: refactor smart contract logic 2023-08-01 15:12:09 +0200