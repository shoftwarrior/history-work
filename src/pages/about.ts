main: refactor smart contract logic 2020-03-16 00:00:02 +0200