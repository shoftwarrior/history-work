main: refactor smart contract logic 2020-10-30 00:00:02 +0200